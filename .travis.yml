language: node_js
node_js: 
  - "stable"
cache:
  directories:
    - "node_modules"
services:
  - postgresql
before_install: cd ./server
install:
    - npm install
before_script:
  - cat .env.travis >> .env
  - psql -c "DROP DATABASE banka_test;" -U postgres
  - psql -c "CREATE DATABASE banka_test;" -U postgres
  - psql -c "CREATE USER postgres WITH PASSWORD 'postgres';" -U postgres
script:
    - npm run test
after_success:
     npm run coverage
addons: 
  postgresql: "11"
